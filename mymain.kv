#: import WipeTransition kivy.uix.screenmanager.WipeTransition

WindowManger:
    transition: WipeTransition()

    id: screen_manager

    menu: menu
    team: team
    shop: shop
    skills_window: skills_window
    fight: fight
    game_over: game_over
    battle_result: battle_result

    Menu:
        id: menu
        name: "menu"
        manager: screen_manager
    Team:
        id: team
        name: "team"
        manager: screen_manager
    Shop:
        id: shop
        name: "shop"
        manager: screen_manager
    Skills_Window:
        id: skills_window
        name: "skills"
        manager: screen_manager
    Fight:
        id: fight
        name: "fight"
        manager: screen_manager
    Game_Over:
        id: game_over
        name: "game_over"
        manager: screen_manager
    Battle_Result:
        id: battle_result
        name: "battle_result"
        manager: screen_manager

<Menu>:
    name: "menu"
    area_progress: area_progress
    on_pre_enter: root.enter_setup()
    Button:
        text: "Sklep"
        on_release: app.root.current = "shop"
        pos: 200,300    
        size_hint: 0.1,0.1
    Button:
        text: "walka główna"
        on_release: root.start_main_fight()
        pos: 1000,350
        size_hint: 0.1,0.1
    Button:
        text: "Walka treningowa"
        on_release: root.start_random_fight()
        pos: 700,700     
        size_hint: 0.1,0.1       
    Button:
        text: "Drużyna"
        on_release: app.root.current = "team"
        pos: 0,0
        size_hint: 0.1,0.1
    Button:
        text: "Umiejętności"
        on_release: app.root.current = "skills"
        pos: 200,0
        size_hint: 0.1,0.1
    Button:
        text: "Zapisz grę"
        pos: 400,0
        size_hint: 0.1,0.1
    Button:
        text: "Powrót do głównego menu"
        pos: 600,0
        size_hint: 0.1,0.1
    ProgressBar:
        id: area_progress
        pos: 1150,0
        size_hint_x: .40
        canvas.before:
            PushMatrix
            Rotate:
                angle: 90
                origin: self.center
        canvas.after:
            PopMatrix
    Label:
        id: area_progress_text
        pos: 650,0

<Shop>:
    name: "shop"
    on_pre_enter: root.enter_setup()
    size_hint: None, None
        
<Skills_Window>:
    name: "skills"
    on_pre_enter: root.enter_setup()
    size_hint: None, None

<Team>:
    name: "team"
    on_pre_enter: root.enter_setup()
    size_hint: None, None

<Fight>:
    hp_bar_player: hp_bar_player
    mp_bar_player: mp_bar_player
    hp_bar_companion_one: hp_bar_companion_one
    mp_bar_companion_one: mp_bar_companion_one
    hp_bar_companion_two: hp_bar_companion_two
    mp_bar_companion_two: mp_bar_companion_two
    hp_bar_enemy_one: hp_bar_enemy_one
    hp_bar_enemy_two: hp_bar_enemy_two
    hp_bar_enemy_three: hp_bar_enemy_three
    name: "fight"
    on_pre_enter: root.start_fight_setup()
    Label:
        id: hp_bar_player
        text: ""
        pos: -610,-300
    Label:
        id: mp_bar_player
        text: ""
        pos: -610,-320
    Label:
        id: hp_bar_companion_one
        text: ""
        pos: -610,-240
    Label:
        id: mp_bar_companion_one
        text: ""
        pos: -610,-260
    Label:
        id: hp_bar_companion_two
        text: ""
        pos: -610,-360
    Label:
        id: mp_bar_companion_two
        text: ""
        pos: -610,-380
    Label:
        id: hp_bar_enemy_one
        text: ""
        pos: 630,340
    Label:
        id: hp_bar_enemy_two
        text: ""
        pos: 630,380
    Label:
        id: hp_bar_enemy_three
        text: ""
        pos: 630,300    
    Button:
        id: attack
        text:"atak"
        on_release: root.action_attack()
        pos: 600,0
        size_hint: 0.06,0.06
    Button:
        id: spells
        text:"zaklęcia"
        on_release: root.action_spells()
        pos: 700,0
        size_hint: 0.06,0.06
    Button:
        text:"Go back"
        on_release: app.root.current = "menu"
        pos: 800,0
        size_hint: 0.06,0.06

<Game_Over>:
    name: "game_over"
    size_hint: None, None
    Button:
        on_release: app.root.current = "menu"
        pos: 1450,800
        size: 50,50
        size_hint: None,None
        source: "go_back.png"

<Battle_Result>:
    name: "battle_result"
    size_hint: None, None
    on_pre_enter: root.enter_setup()
        
<Main_Player_Sprite>:
    pos:450,500
    size_hint: 0.1,0.1
    canvas:
        Rectangle:
            source: root.sprite
            size: self.size
            pos: self.pos
        
<Companion1_Sprite>:
    pos: 350,250
    size_hint: 0.1,0.1
    canvas:
        Rectangle:
            source: root.sprite
            size: self.size
            pos: self.pos
            
<Companion2_Sprite>:
    pos: 250, 700
    size_hint: 0.1,0.1
    canvas:
        Rectangle:
            source: root.sprite
            size: self.size
            pos: self.pos


<Enemy1_Sprite>:
    pos: 950,500
    size_hint: 0.1,0.1
    canvas:
        Rectangle:
            source: root.sprite
            size: self.size
            pos: self.pos
<Enemy2_Sprite>:
    pos: 1150,700
    size_hint: 0.1,0.1
    canvas:
        Rectangle:
            source: root.sprite
            size: self.size
            pos: self.pos
<Enemy3_Sprite>:
    pos: 1100,250
    size_hint: 0.1,0.1
    canvas:
        Rectangle:
            source: root.sprite
            size: self.size
            pos: self.pos
    
<ItemSlot>:
    drag_rectangle: self.x, self.y, self.width, self.height
    drag_timeout: 10000000
    drag_distance: 0
    size_hint: None, None   
    size: 75,75
    canvas:
        Color: 
            rgba: 1,1,1,1
        Rectangle:
            pos: self.pos
            size: self.size
            source: self.sprite

<SkillSlot>:
    size_hint: None, None   
    size: 50,50
    canvas:
        Color: 
            rgba: 1,1,1,1
        Rectangle:
            pos: self.pos
            size: self.size
            source: self.sprite

<Skill_Line>:
    canvas:
        Color: 
            rgba: 1,1,1,1
        Line:
            width: 4
            points: self.points

<Skill_List_Pop_Up>:
    ScrollView:
        do_scroll_y: True
        do_scroll_x: False
        pos: 700,550
        size_hint: 0.5,0.5
        BoxLayout:
            id: list
            orientation: 'vertical'
            size_hint: None,None
            height: 500

<Stat_STR_Button>:
    size_hint: None, None   
    size: 25,25
    canvas:
        Color: 
            rgba: 1,1,1,1
        Rectangle:
            pos: self.pos
            size: self.size

<Stat_DEX_Button>:
    size_hint: None, None   
    size: 25,25
    canvas:
        Color: 
            rgba: 1,1,1,1
        Rectangle:
            pos: self.pos
            size: self.size

<Stat_INT_Button>:
    size_hint: None, None   
    size: 25,25
    canvas:
        Color: 
            rgba: 1,1,1,1
        Rectangle:
            pos: self.pos
            size: self.size